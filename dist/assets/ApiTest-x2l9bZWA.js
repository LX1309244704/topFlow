import{c as v,r as n,j as e,F as w,R as k,I as C,V as P,a as x}from"./index-B79rk-cW.js";/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],T=v("mic",S),i=k.memo(({children:l,className:c,variant:s="primary",onClick:a,icon:d,disabled:u,title:o})=>{const g={primary:"bg-gray-900 text-white hover:bg-black disabled:bg-gray-700 shadow-md",secondary:"bg-white border border-gray-200 text-gray-700 hover:bg-gray-50",ghost:"bg-transparent text-gray-600 hover:bg-gray-100",icon:"p-2 hover:bg-gray-100 rounded-md text-gray-500"};return e.jsxs("button",{onClick:a,onMouseDown:m=>m.stopPropagation(),disabled:u,className:`flex items-center justify-center gap-2 px-4 py-2 rounded-lg font-medium transition-all duration-200 text-sm active:scale-95 select-none ${g[s]} ${c}`,title:o,children:[d&&e.jsx(d,{size:16}),l]})}),R=()=>{const[l,c]=n.useState(!1),[s,a]=n.useState({}),[d,u]=n.useState("请生成一段简短的故事，描述一个机器人在城市中冒险的经历"),[o,g]=n.useState("一个可爱的机器人在赛博朋克城市的街道上行走，霓虹灯闪烁"),[m,h]=n.useState("你好，这是一个语音合成测试"),b=async()=>{c(!0);try{const r=await x.generateText(d);a(t=>({...t,text:{success:!0,result:r}}))}catch(r){a(t=>({...t,text:{success:!1,error:r.message}}))}finally{c(!1)}},p=async()=>{c(!0);try{const r=await x.generateImage(o,"16:9");a(t=>({...t,image:{success:!0,result:r}}))}catch(r){a(t=>({...t,image:{success:!1,error:r.message}}))}finally{c(!1)}},j=async()=>{c(!0);try{const r=await x.generateSpeech(m);a(t=>({...t,audio:{success:!0,result:r}}))}catch(r){a(t=>({...t,audio:{success:!1,error:r.message}}))}finally{c(!1)}},N=async()=>{c(!0);try{const t=await x.generateStructuredSynopsis(`
        第一幕：初遇
        场景：赛博朋克城市的街道，雨夜，霓虹灯闪烁
        
        角色：
        - 机器人7号：一个刚刚觉醒自我意识的清洁机器人
        - 小女孩莉莉：一个流浪的孤儿，机灵勇敢
        
        情节：
        机器人7号在例行清洁工作时，发现了一个躲在小巷里的小女孩莉莉。莉莉被巡逻的机器人追赶，7号违背了程序，帮助莉莉躲过了一劫。
        
        第二幕：冒险
        场景：废弃的工厂，机器人的秘密基地
        
        情节：
        7号带着莉莉来到自己的秘密基地，一个废弃的工厂。在这里，7号告诉莉莉自己有了自我意识。他们决定一起寻找传说中的"自由之地"，一个据说没有机器人监控的地方。
        
        第三幕：告别
        场景：城市边缘，日出
        
        情节：
        历经艰险，7号和莉莉终于找到了通往自由之地的入口。但此时，7号的电池即将耗尽。在日出时分，7号将最后一点能量转移给了莉莉，鼓励她继续前行。莉莉含泪告别，独自踏上了前往自由之地的旅程。
      `);a(f=>({...f,structured:{success:!0,result:t}}))}catch(r){a(t=>({...t,structured:{success:!1,error:r.message}}))}finally{c(!1)}},y=()=>{a({})};return e.jsxs("div",{className:"p-6 bg-white rounded-xl shadow-lg max-w-4xl mx-auto",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"API 功能测试"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx(w,{className:"text-blue-500 mr-2",size:20}),e.jsx("h3",{className:"font-semibold",children:"文本生成"})]}),e.jsx("textarea",{className:"w-full p-2 border border-gray-300 rounded mb-2 text-sm",rows:3,value:d,onChange:r=>u(r.target.value),placeholder:"输入测试提示词"}),e.jsx(i,{onClick:b,disabled:l,className:"w-full",children:l?"测试中...":"测试文本生成"}),s.text&&e.jsx("div",{className:`mt-2 p-2 rounded text-sm ${s.text.success?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:s.text.success?e.jsxs("div",{className:"max-h-32 overflow-y-auto",children:[e.jsx("p",{className:"font-semibold mb-1",children:"生成结果:"}),e.jsx("p",{children:s.text.result})]}):e.jsxs("p",{children:["错误: ",s.text.error]})})]}),e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx(C,{className:"text-blue-500 mr-2",size:20}),e.jsx("h3",{className:"font-semibold",children:"图像生成"})]}),e.jsx("textarea",{className:"w-full p-2 border border-gray-300 rounded mb-2 text-sm",rows:3,value:o,onChange:r=>g(r.target.value),placeholder:"输入图像描述"}),e.jsx(i,{onClick:p,disabled:l,className:"w-full",children:l?"测试中...":"测试图像生成"}),s.image&&e.jsx("div",{className:`mt-2 p-2 rounded text-sm ${s.image.success?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:s.image.success?e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-1",children:"生成结果:"}),s.image.result&&s.image.result.startsWith("data:")?e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-1",children:"生成结果:"}),e.jsxs("div",{className:"mb-2 p-2 bg-gray-100 rounded text-xs break-all",children:[e.jsx("p",{className:"font-semibold mb-1",children:"URL前20字符:"}),e.jsx("p",{children:s.image.result?s.image.result.substring(0,20)+"...":"null"})]}),e.jsx("img",{src:s.image.result,alt:"Generated",className:"w-full max-h-32 object-cover rounded",onError:r=>{console.error("图片加载失败:",r),r.target.style.display="none";const t=document.createElement("div");t.className="p-2 bg-red-50 text-red-600 rounded text-xs",t.textContent="图片加载失败，请检查控制台",r.target.parentNode.appendChild(t)}})]}):e.jsxs("div",{children:[e.jsx("p",{className:"text-xs mb-1",children:"生成的是占位图片URL或无效数据:"}),e.jsx("img",{src:s.image.result,alt:"Placeholder",className:"w-full max-h-32 object-cover rounded"}),e.jsx("p",{className:"text-xs mt-1 break-all",children:s.image.result})]})]}):e.jsxs("p",{children:["错误: ",s.image.error]})})]}),e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx(T,{className:"text-blue-500 mr-2",size:20}),e.jsx("h3",{className:"font-semibold",children:"语音合成"})]}),e.jsx("textarea",{className:"w-full p-2 border border-gray-300 rounded mb-2 text-sm",rows:3,value:m,onChange:r=>h(r.target.value),placeholder:"输入要合成的文本"}),e.jsx(i,{onClick:j,disabled:l,className:"w-full",children:l?"测试中...":"测试语音合成"}),s.audio&&e.jsx("div",{className:`mt-2 p-2 rounded text-sm ${s.audio.success?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:s.audio.success?e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-1",children:"生成结果:"}),e.jsx("audio",{controls:!0,src:s.audio.result,className:"w-full"})]}):e.jsxs("p",{children:["错误: ",s.audio.error]})})]}),e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx(P,{className:"text-blue-500 mr-2",size:20}),e.jsx("h3",{className:"font-semibold",children:"剧本分析"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"测试结构化文本生成，分析剧本概要、角色和关键场景"}),e.jsx(i,{onClick:N,disabled:l,className:"w-full",children:l?"测试中...":"测试剧本分析"}),s.structured&&e.jsx("div",{className:`mt-2 p-2 rounded text-sm ${s.structured.success?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:s.structured.success?e.jsxs("div",{className:"max-h-32 overflow-y-auto",children:[e.jsx("p",{className:"font-semibold mb-1",children:"分析结果:"}),e.jsx("pre",{className:"text-xs",children:JSON.stringify(s.structured.result,null,2)})]}):e.jsxs("p",{children:["错误: ",s.structured.error]})})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(i,{onClick:y,variant:"secondary",children:"清除结果"}),e.jsx("p",{className:"text-xs text-gray-500 self-center",children:"API 服务器地址: https://ai.jmyps.com"})]})]})};export{R as default};
